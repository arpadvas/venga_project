<h1 class="h-no-top-margin grey-header">My ascents</h1>
    
<button type="button" class="btn btn-primary" ng-click="ascent.showAscentModal();">Add Ascent</button>
 
<br> 
<br> 

<div class="alert alert-success alert-custom show-hide-message" role="alert" ng-show='ascent.searchSuccessMsg'><p>{{ascent.searchSuccessMsg}}</p></div>
<div class="alert alert-danger alert-custom show-hide-message" role="alert" ng-show='ascent.searchErrorMsg'><p>{{ascent.searchErrorMsg}}</p></div>

<div class="panel panel-primary">
	<div class="panel-heading">
		<h3 class="panel-title">Search</h3>
	</div>
	<div class="panel-body">

		<form class="form-horizontal">
		  <div class="form-group">
		    <label class="col-sm-2 control-label">Name</label>
		    <div class="col-sm-10">
		      <input type="text" class="form-control" name="searchByName" placeholder="Search by name" ng-model="searchByName">
		    </div>
		  </div>
		  <div class="form-group">
		    <label class="col-sm-2 control-label">Style</label>
		    <div class="col-sm-10">
		    	<select class="form-control" name="searchByStyle" ng-model="searchByStyle" ng-options="y for y in ascent.styles"></select>
		    </div>
		  </div>
		  <div class="form-group">
		    <label class="col-sm-2 control-label">Grade</label>
		    <div class="col-sm-10">
		    	<select class="form-control" name="searchByGrade" ng-model="searchByGrade" ng-options="x for x in ascent.grades"></select>
		    </div>
		  </div>
		  <div class="form-group">
		    <div class="col-sm-offset-2 col-sm-10">
		      <button type="submit" class="btn btn-success" ng-click="ascent.search(searchByName, searchByStyle, searchByGrade);">Search</button>
		      <button type="submit" class="btn btn-secondary" ng-click="ascent.clear();">Clear</button>
		    </div>
		  </div>
		  <div class="form-group" ng-show="searchFilter !== undefined">
		    <div class="col-sm-offset-2 col-sm-10">
		      <p>Total results: {{(ascent.ascents | filter: searchFilter).length}}</p>
		    </div>
		  </div>
		</form>

	</div>
</div>


<div class="panel panel-primary">
	<div class="panel-heading">
		<h3 class="panel-title">Ascents</h3>
	</div>
		<div class="panel-body no-padding">
			<div class="table-responsive">
				<table class="table table-hover">
					<tr>
						<th>Name</th>
						<th>Style</th>
						<th>Grade</th>
						<th>Date</th>	
						<th>Action</th>
				</tr>
				<tr ng-repeat="climb in ascent.ascents | filter: searchFilter">
					<td>{{climb.name}}</td>
						<td>{{climb.style}}</td>
						<td>{{climb.grade}}</td>
						<td>{{climb.date | date:'fullDate' }}</td>
						<td>
							<a class="btn btn-primary" href="#" role="button" ng-click="ascent.showEditAscentModal(climb._id);">Edit</a>
							<a class="btn btn-danger" href="#" role="button" ng-click="ascent.deleteAscent(climb._id);">Delete</a>
						</td>	
					</tr>
				</table>
				</div>
		</div>
</div>

<!-- Add Modal -->
<div class="modal fade" id="ascentModal" role="dialog">
<div class="modal-dialog">

  <!-- Modal content-->
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" ng-click="ascent.cancelAscentModal();">&times;</button>
      <h4 class="modal-title">Add new ascent</h4>
    </div>
    <div class="modal-body">
    	<!-- add ascent form  -->
      <div class="input-custom">
	  	<form name="ascent.ascentForm">
		  <div class="form-group">
		    <label>Name</label>
		    <input name="name" class="form-control" placeholder="Name" ng-model="ascent.ascentData.name">
		  </div>
		  <div class="form-group">
		    <label>Style</label>
		    <select class="form-control" ng-model="ascent.ascentData.style" ng-options="y for y in ascent.styles"></select>
		  </div>
		  <div class="form-group">
		    <label>Grade</label>
		    <select class="form-control" ng-model="ascent.ascentData.grade" ng-options="x for x in ascent.grades"></select>
		  </div>
		  <!-- <div class="form-group" ng-controller="datepickerCtrl"> -->
		  <div class="form-group">
		    <label>Date</label>
		    <p>Selected date is: <em>{{dt | date:'fullDate' }}</em></p>
		    <div uib-datepicker ng-model="dt" datepicker-options="options"></div>
		  </div>
		</form>

		<br>

		<div class="alert alert-info alert-custom" role="alert" ng-show='ascent.loading'><span class="glyphicon glyphicon-repeat spinner" aria-hidden="true"></span><p>Loading...</p></div>
	  	<div class="alert alert-success alert-custom show-hide-message" role="alert" ng-show='ascent.successMsg'><p>{{ascent.successMsg}}</p></div>
	  	<div class="alert alert-danger alert-custom show-hide-message" role="alert" ng-show='ascent.errorMsg'><p>{{ascent.errorMsg}}</p></div>
	  </div>
	  <!-- /add ascent form  -->
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-success" ng-click="ascent.addAscent(ascentData);">Submit</button>
      <button type="button" class="btn btn-danger" ng-click="ascent.cancelAscentModal();">Cancel</button>
    </div>
  </div>
  
</div>
</div>
<!-- /Modal content-->

<!-- Add Modal -->
<div class="modal fade" id="editAscentModal" role="dialog">
<div class="modal-dialog">

  <!-- Modal content-->
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" ng-click="ascent.cancelEditAscentModal();">&times;</button>
      <h4 class="modal-title">Edit ascent</h4>
    </div>
    <div class="modal-body">
    	<!-- edit ascent form  -->
      <div class="input-custom">
	  	<form>
		  <div class="form-group">
		    <label>Name</label>
		    <input name="name" class="form-control" placeholder="Name" ng-model="newName">
		  </div>
		  <div class="form-group">
		    <label>Style</label>
		    <!-- <input class="form-control" placeholder="Style" ng-model="newStyle"> -->
		    <select class="form-control" ng-model="newStyle" ng-options="y for y in ascent.styles"></select>
		  </div>
		  <div class="form-group">
		    <label>Grade</label>
		    <select class="form-control" ng-model="newGrade" ng-options="x for x in ascent.grades"></select>
		  </div>
		  <div class="form-group">
		    <label>Date</label>
		    <p>Selected date is: <em>{{dt | date:'fullDate' }}</em></p>
		    <div uib-datepicker ng-model="dt" datepicker-options="options"></div>
		  </div>
		</form>

		<br>

		<div class="alert alert-info alert-custom" role="alert" ng-show='ascent.loading'><span class="glyphicon glyphicon-repeat spinner" aria-hidden="true"></span><p>&nbsp;Loading...</p></div>
	  	<div class="alert alert-success alert-custom show-hide-message" role="alert" ng-show='ascent.successMsg'><p>{{ascent.successMsg}}</p></div>
	  	<div class="alert alert-danger alert-custom show-hide-message" role="alert" ng-show='ascent.errorMsg'><p>{{ascent.errorMsg}}</p></div>
	  </div>
	  <!-- /add ascent form  -->
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-success" ng-click="ascent.saveAscent(newName, newStyle, newGrade);">Save</button>
      <button type="button" class="btn btn-danger" ng-click="ascent.cancelEditAscentModal();">Cancel</button>
    </div>
  </div>
  
</div>
</div>
<!-- /Modal content-->


